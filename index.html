<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Borno state Weather - Utility | Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin="" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        @keyframes zoomIn {
            from {
                transform: scale(0.8);
            }

            to {
                transform: scale(1);
            }
        }

        .leaflet-div-icon {
            animation: zoomIn 0.5s ease-in-out;
        }

        #map {
            width: 100%;
            height: 100vh;
        }
        .clock {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 20px;
        }
        .analysis {
            font-size: 1.2em;
        }
        .icon {
            color: rgb(14, 123, 196);
            font-size: 25px;
            margin-right: 7px;
        }
        
        @media only screen and (max-width: 600px) {
            .clock {
                font-size: 0.9em;
                font-weight: 500;
                margin-bottom: 12px;
            }
            .icon {
                font-size: 12px;
                margin-right: 2px;
            }
        }
    </style>
</head>
  <body>
    
    <div class="container-fluid">
        <div style="height: 45px; border-bottom: 1px solid black;">
           <div class="row">
                <div class="col-3">
                    <i class="fas fa-clock icon"></i> <span class="clock" id="clock"></span>
                </div>
                <div class="col-9">
                    <h4><marquee>DIGITAL NIGERIA INTERNATIONAL CONFERENCE 2024 BORNO STATE</marquee></h4>
                </div>
           </div>
        </div>
        <div class="row">
            <div class="col-md-8 col-sm-12">

               <div class="m-3">
                <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="true">
                    <div class="carousel-indicators">
                      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                    </div>
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <img src="Digital-Nigeria.jpg" class="d-block w-100" alt="...">
                      </div>
                      <div class="carousel-item">
                        <img src="a6085b859ba067c32fdcb39cf7465c44.jpg" class="d-block w-100" alt="...">
                      </div>
                      <div class="carousel-item">
                        <img src="97840x2.png" class="d-block w-100" alt="...">
                      </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Next</span>
                    </button>
                  </div>
               </div>
               <h3>About Us</h3>
               <p>This project highlights the impact of flooding in Borno State, providing real-time data on affected areas and offering insights into preventive measures. By mapping critical infrastructure and flood-prone regions, we aim to assist local authorities and citizens in better understanding the region’s vulnerabilities to natural disasters.</p>
               <h5>Aims</h5>
               <p>
              - Map flood-affected areas in Borno State.<BR>
- Provide actionable data to improve disaster response.<BR>
- Increase awareness of climate change impacts.<BR>
- Support local planning with infrastructure risk analysis.</p>
                <div id="map"></div>
                <hr>
                <div class="container">
                    <div class="chart-container">
                        <canvas id="weatherChart"></canvas>
                    </div> 
                </div>
            </div>
            <div class="col-md-4 col-sm-12 border-left">
                <div class="info-container">
                    <div class="analysis" id="analysis"></div>
                </div>
                <hr>
                <h3>Utility Statistics</h3>
                <canvas id="utilityChart"></canvas>
                <h3>Flood Affected Areas</h3>
                <canvas id="floodChart"></canvas>
                <h3>Flood Percentage(%)</h3>
                <canvas id="donutChart"></canvas>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
        <!-- jQuery -->
        <script>
            function updateClock() {
                const now = new Date();
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');
                const timeString = `${hours}:${minutes}:${seconds}`;
                document.getElementById('clock').textContent = timeString;
            }
            setInterval(updateClock, 1000); // Update the clock every second
    
            // Fetch weather data from the API
            async function fetchWeatherData() {
                const response = await fetch("https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&current=temperature_2m&hourly=temperature_2m,relative_humidity_2m,precipitation_probability,precipitation,rain,cloud_cover_low,cloud_cover_mid,wind_speed_10m&daily=weather_code,daylight_duration,sunshine_duration&timezone=auto&forecast_days=1");
                const data = await response.json();
    
                // Call functions to update the chart and analysis
                updateChart(data);
                generateAnalysis(data);
            }
    
            // Update the chart with the fetched data
            let weatherChart;
    
            function updateChart(data) {
                const timeLabels = data.hourly.time.map(time => new Date(time).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }));
                const temperatureData = data.hourly.temperature_2m;
                const humidityData = data.hourly.relative_humidity_2m;
                const precipitationData = data.hourly.precipitation_probability;
                const windSpeedData = data.hourly.wind_speed_10m;
    
                const ctx = document.getElementById('weatherChart').getContext('2d');
    
                if (weatherChart) {
                    weatherChart.destroy(); // Destroy the previous chart instance
                }
    
                weatherChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: timeLabels,
                        datasets: [
                            {
                                label: 'Temperature (°C)',
                                data: temperatureData,
                                borderColor: 'rgb(237, 22, 14)',
                                backgroundColor: 'rgb(120, 11, 4)',
                                yAxisID: 'y',
                            },
                            {
                                label: 'Humidity (%)',
                                data: humidityData,
                                borderColor: 'rgba(54, 162, 235, 1)',
                                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                yAxisID: 'y1',
                            },
                            {
                                label: 'Precipitation Probability (%)',
                                data: precipitationData,
                                borderColor: 'rgba(75, 192, 192, 1)',
                                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                                yAxisID: 'y',
                            },
                            {
                                label: 'Wind Speed (km/h)',
                                data: windSpeedData,
                                borderColor: 'rgba(153, 102, 255, 1)',
                                backgroundColor: 'rgba(153, 102, 255, 0.2)',
                                yAxisID: 'y1',
                            }
                        ]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                position: 'left',
                            },
                            y1: {
                                beginAtZero: true,
                                position: 'right',
                            }
                        }
                    }
                });
            }
    
            // Generate weather analysis based on the data
            function generateAnalysis(data) {
                const temperatureData = data.hourly.temperature_2m;
                const humidityData = data.hourly.relative_humidity_2m;
                const windSpeedData = data.hourly.wind_speed_10m;
    
                const currentTemp = temperatureData[temperatureData.length - 1];
                const currentHumidity = humidityData[humidityData.length - 1];
                const currentWindSpeed = windSpeedData[windSpeedData.length - 1];
    
                let analysisText = `The current temperature is ${currentTemp}°C. `;
                analysisText += `Humidity is around ${currentHumidity}%, `;
                analysisText += currentWindSpeed > 10 ? `with strong winds at ${currentWindSpeed} km/h.` : `and winds are moderate at ${currentWindSpeed} km/h.`;
    
                document.getElementById('analysis').textContent = analysisText;
            }
    
            // Refresh weather data every 5 seconds
            setInterval(fetchWeatherData, 5000); // Refresh every 5 seconds
    
            // Call the function to fetch the weather data on page load
            fetchWeatherData();
         </script>
    
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
        <!-- Leaflet JS -->
        <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
            integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
            crossorigin=""></script>
        <!-- Chart.js -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
        <script>
            // Initialize the map
            var map = L.map('map').setView([11.8333, 13.1500], 13);
    
            // Add a tile layer
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '© OpenStreetMap'
            }).addTo(map);
    
            // Utility icons
            var utilityIcons = {
                electricity: L.divIcon({
                    html: '<i class="material-icons" style="color: red; font-size: 24px;">bolt</i>',
                    className: '',
                    iconSize: [24, 24]
                }),
                water: L.divIcon({
                    html: '<i class="material-icons" style="color: blue; font-size: 24px;">water_drop</i>',
                    className: '',
                    iconSize: [24, 24]
                }),
                healthcare: L.divIcon({
                    html: '<i class="material-icons" style="color: green; font-size: 24px;">local_hospital</i>',
                    className: '',
                    iconSize: [24, 24]
                }),
                school: L.divIcon({
                    html: '<i class="material-icons" style="color: orange; font-size: 24px;">school</i>',
                    className: '',
                    iconSize: [24, 24]
                }),
                police: L.divIcon({
                    html: '<i class="material-icons" style="color: navy; font-size: 24px;">security</i>',
                    className: '',
                    iconSize: [24, 24]
                }),
                market: L.divIcon({
                    html: '<i class="material-icons" style="color: brown; font-size: 24px;">shopping_cart</i>',
                    className: '',
                    iconSize: [24, 24]
                }),
                lpg: L.divIcon({
                    html: '<i class="material-icons" style="color: purple; font-size: 24px;">local_gas_station</i>',
                    className: '',
                    iconSize: [24, 24]
                }),
                bridge: L.divIcon({
                    html: '<i class="material-icons" style="color: gray; font-size: 24px;">bridge</i>',
                    className: '',
                    iconSize: [24, 24]
                }),
                rail: L.divIcon({
                    html: '<i class="material-icons" style="color: teal; font-size: 24px;">train</i>',
                    className: '',
                    iconSize: [24, 24]
                }),
                treatment: L.divIcon({
                    html: '<i class="material-icons" style="color: aqua; font-size: 24px;">local_drink</i>',
                    className: '',
                    iconSize: [24, 24]
                })
            };
    
            // Add markers for various utilities
            const utilities = [
                { name: 'Electric Station', coords: [11.8333, 13.1500], icon: utilityIcons.electricity },
                { name: 'LPG Station', coords: [11.8343, 13.1600], icon: utilityIcons.lpg },
                { name: 'Bridge', coords: [11.8353, 13.1700], icon: utilityIcons.bridge },
                { name: 'School', coords: [11.8363, 13.1800], icon: utilityIcons.school },
                { name: 'Police Station', coords: [11.8373, 13.1900], icon: utilityIcons.police },
                { name: 'Market', coords: [11.8383, 13.2000], icon: utilityIcons.market },
                { name: 'Water Treatment Plant', coords: [11.8393, 13.2100], icon: utilityIcons.treatment },
                { name: 'Rail Station', coords: [11.8403, 13.2200], icon: utilityIcons.rail }
            ];
    
            utilities.forEach(utility => {
                L.marker(utility.coords, { icon: utility.icon }).addTo(map)
                    .bindPopup(utility.name);
            });
    
            // Highlight flood-affected areas
            var floodAreas = [
                { name: 'Gwange', coords: [[11.8320, 13.1500], [11.8325, 13.1520], [11.8315, 13.1525]] },
                { name: 'Post Office', coords: [[11.8330, 13.1530], [11.8335, 13.1540], [11.8325, 13.1545]] },
                { name: 'GRA', coords: [[11.8350, 13.1550], [11.8355, 13.1560], [11.8345, 13.1565]] },
                { name: 'Gadda', coords: [[11.8340, 13.1580], [11.8345, 13.1590], [11.8335, 13.1595]] },
                { name: 'Alau Dam', coords: [[11.8360, 13.1600], [11.8365, 13.1610], [11.8355, 13.1615]] },
                { name: 'Custom', coords: [[11.8370, 13.1620], [11.8375, 13.1630], [11.8365, 13.1635]] },
                { name: 'Muna', coords: [[11.8380, 13.1640], [11.8385, 13.1650], [11.8375, 13.1655]] },
                { name: 'Kasuwan Shanu', coords: [[11.8390, 13.1660], [11.8395, 13.1670], [11.8385, 13.1675]] }
            ];
    
            floodAreas.forEach(area => {
                L.polygon(area.coords, {
                    color: 'black',
                    dashArray: '5, 5',
                    weight: 2
                }).addTo(map).bindPopup('Flood-Affected Area: ' + area.name);
            });
    
            // Chart.js for Utility Statistics
            var ctxUtility = document.getElementById('utilityChart').getContext('2d');
            var utilityChart = new Chart(ctxUtility, {
                type: 'bar',
                data: {
                    labels: ['Electric Stations', 'LPG Stations', 'Bridges', 'Schools', 'Police Stations', 'Markets', 'Water Treatment', 'Rail Stations'],
                    datasets: [{
                        label: 'Number of Utilities',
                        data: [5, 3, 2, 8, 4, 7, 2, 1],
                        backgroundColor: ['red', 'blue', 'green', 'orange', 'navy', 'brown', 'purple', 'teal'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
    
            // Chart.js for Flood Affected Areas
            var ctxFlood = document.getElementById('floodChart').getContext('2d');
            var floodChart = new Chart(ctxFlood, {
                type: 'bar',
                data: {
                    labels: ['Gwange', 'Post Office', 'GRA', 'Gadda', 'Alau Dam', 'Custom', 'Muna', 'Kasuwan Shanu'],
                    datasets: [{
                        label: 'Flood Area Impact',
                        data: [50, 30, 40, 20, 10, 5, 15, 25],
                        backgroundColor: 'aqua',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
    
            // Chart.js for Donut Chart
            var ctxDonut = document.getElementById('donutChart').getContext('2d');
            var donutChart = new Chart(ctxDonut, {
                type: 'doughnut',
                data: {
                    labels: ['Gwange', 'Post Office', 'GRA', 'Gadda', 'Alau Dam', 'Custom', 'Muna', 'Kasuwan Shanu'],
                    datasets: [{
                        label: 'Flood Areas Distribution',
                        data: [50, 30, 40, 20, 10, 5, 15, 25],
                        backgroundColor: ['red', 'blue', 'green', 'orange', 'purple', 'cyan', 'yellow', 'pink'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true
                }
            });
        </script>
  </body>
</html>


